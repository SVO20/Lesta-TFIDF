# TF-IDF Analyzer Web App (test case)

Интерактивное веб-приложение для анализа отдельных текстов через метрику TF-IDF с использованием загружаемого в базу данных корпуса текстов.

---

## Функционал

- Выбор режима работы с базой данных: создать новую или использовать существующую (если она есть).
- Загрузка одного или нескольких `.txt` файлов через форму.
- Очистка и нормализация текста:
  - Лемматизация (pymystem3 от Яндекса),
  - Фильтрация стоп-слов (предзагруженный набор из модели SpaCy-large),
  - Хеширование содержимого для предотвращения дубликатов.
- Сохранение метрик в SQLite базу данных для ускорения дальнейших расчётов.
  - Предусмотрено хранение содержимого исходных файлов в базе данных в заархивированном виде
- Расчет **tf**, **idf** и **tf-idf** по всем словам в текущем тексте.
  - Расчёт производится для последнего выбранного в диалоге загрузки файла
- Вывод топ-50 слов в виде таблицы с интерактивной сортировкой по полям (`tf-idf`, `tf`, `idf`, `count`).

---

## Стек

- **Python 3.13**
- **Streamlit** — веб-интерфейс
- **Pymystem3** — морфологический анализ от Яндекса
- **SQLAlchemy as DSL** — работа с SQLite, однако без ORM
- **xxhash** — контроль уникальности текстов
- **loguru** — логирование событий

---

## Особенности реализации

- База данных `SQLite` (`db/project.db`) создаётся автоматически.
- Загруженные документы индексируются через быстрый хэш `xxhash64` для отслеживания дубликатов.
- Поддерживается множественная загрузка файлов.
- Результаты можно отсортировать по разным метрикам интерактивно.
- Логгирование производится в консоль, однако логгер позволяет писать лог в файл.
- В ветке demo находится разбитый демонстрационый корпус документов: разбитый на файлы .txt по авторским частям роман "Война и мир".

---

## Запуск приложения

```bash
git clone --single-branch --branch master https://github.com/SVO20/Lesta-TFIDF.git

cd Lesta-TFIDF
python -m venv venv
source venv/bin/activate        # для Linux/MacOS
venv\Scripts\activate           # для Windows
pip install -r requirements.txt
streamlit run streamlit_app.py
```

После запуска приложение будет доступно по адресу:  
 [http://localhost:8501](http://localhost:8501)

## Загрузка приложения с демонстрационным корпусом документов

Первой командой из инструкции выше выполните следующее:

```bash
git clone --single-branch --branch demo https://github.com/SVO20/Lesta-TFIDF.git
```

Корпус документов будет находиться в поддиректории `warpeace_example`
